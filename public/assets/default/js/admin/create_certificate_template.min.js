!function(){"use strict";function e(){$(".js-template-contents").val($("#certificateTemplateContainer").html())}function t(){$(".draggable-element").draggable({containment:".certificate-template-container",stop:function(t,n){e()}})}function n(n,a){var c,i=n.attr("data-element"),l=n.find(".js-status-element");a?(function(e,n){var a,c,i=e.find(".js-element-content").val(),l=e.find(".js-element-font_size").val(),o=e.find(".js-element-font_color").val(),s=e.find(".js-element-font_weight_bold").is(":checked"),r=e.find(".js-element-text_center").is(":checked"),d=e.find(".js-element-text_right").is(":checked"),m=$('.draggable-element[data-name="'.concat(n,'"]'));m.length<1&&(m=$('<div class="draggable-element" data-name="'.concat(n,'"></div>')),$(".certificate-template-container").append(m));var f=r?"center":d?"right":"inherit",g=s?"bold":"inherit",h="",u=null!==(a=m.css("top"))&&void 0!==a?a:0,v=null!==(c=m.css("left"))&&void 0!==c?c:0;if("platform_signature"===n||"stamp"===n){var p=e.find(".js-element-image"),j=p.attr("data-prefix"),b=p.val();i='<img src="'.concat(j+b,'" style="max-height: 100%; max-width: 100%;"/>'),h+="display: flex; align-items: center; justify-content: center;"}m.html(i),h+="top: ".concat(u,";"),h+="left: ".concat(v,";"),h+="font-size: ".concat(l,";"),h+="color: ".concat(o,";"),h+="text-align: ".concat(f,";"),h+="font-weight: ".concat(g,";");var y=e.find(".js-element-styles").val();if(h+=y||"",m.css("cssText",h),"qr_code"===n||"platform_signature"===n||"stamp"===n){var _=e.find(".js-element-image_size option:checked").val();_&&(m.css("width",_),m.css("height",_))}t()}(n,i),l.removeClass("d-none")):(c=i,$(".certificate-template-container").find('.draggable-element[data-name="'+c+'"]').remove(),l.addClass("d-none")),e()}$(document).ready((function(){t()})),$("body").on("change",".js-element-enable",(function(){var e=this.checked;n($(this).closest(".accordion-row"),e)})),$("body").on("keyup change",".js-changeable-element-input",(function(){var e=$(this).closest(".accordion-row"),t=e.find(".js-element-enable").is(":checked");n(e,t)})),$("body").on("change",".js-certificate-image",(function(t){t.preventDefault();var n=$(this).attr("data-prefix"),a=(n=n.replaceAll("\\","/"))+$(this).val();$(".certificate-template-container").css("background-image","url('"+a+"')"),e()}))}(jQuery);