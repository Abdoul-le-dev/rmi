(()=>{function e(e,a){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,a){if(!e)return;if("string"==typeof e)return t(e,a);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,a)}(e))||a&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}!function(t){"use strict";function a(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=0;a<5;a++)e+=t.charAt(Math.floor(52*Math.random()));return e}function n(e,t,a){var n={width:20,height:20},i=feather.icons.upload.toSvg(n),r=e.find(".js-file-type-volume"),o=e.find(".js-file-volume-field"),s=e.find(".js-file-type-field"),l=e.find(".js-downloadable-input"),d=e.find(".js-online_viewer-input"),c=e.find(".js-file-path-input"),f=e.find(".js-s3-file-path-input"),p=e.find(".js-file-path-input button"),u=e.find(".js-file-path-input input"),m=e.find(".js-secure-host-upload-type-field");switch(p.addClass("panel-file-manager"),c.removeClass("d-none"),f.addClass("d-none"),o.addClass("d-none"),s.removeClass("d-none"),m.addClass("d-none"),f.find("input").removeAttr("accept"),t){case"youtube":case"vimeo":case"iframe":r.addClass("d-none"),r.find("select").val(""),l.find("input").prop("checked",!1),l.addClass("d-none"),d.find("input").prop("checked",!1),d.addClass("d-none"),i=feather.icons.link.toSvg(n),p.removeClass("panel-file-manager");break;case"external_link":case"s3":r.removeClass("d-none"),a&&"video"===a?l.removeClass("d-none"):(l.find("input").prop("checked",!1),l.addClass("d-none")),"external_link"===t?(i=feather.icons["external-link"].toSvg(n),p.removeClass("panel-file-manager"),o.removeClass("d-none")):"s3"===t&&(c.addClass("d-none"),f.removeClass("d-none")),a&&"pdf"===a?d.removeClass("d-none"):(d.find("input").prop("checked",!1),d.addClass("d-none"));break;case"secure_host":r.addClass("d-none"),r.find("select").val(""),c.addClass("d-none"),f.removeClass("d-none"),l.find("input").prop("checked",!1),l.addClass("d-none"),d.addClass("d-none"),m.removeClass("d-none"),f.find("input").attr("accept","video/mp4,video/x-m4v,video/*");break;case"google_drive":r.removeClass("d-none"),o.removeClass("d-none"),l.find("input").prop("checked",!1),l.addClass("d-none"),a&&"pdf"===a?d.removeClass("d-none"):(d.find("input").prop("checked",!1),d.addClass("d-none")),i=feather.icons.box.toSvg(n),p.removeClass("panel-file-manager");break;case"upload":r.removeClass("d-none"),l.removeClass("d-none"),a&&"pdf"===a?d.removeClass("d-none"):(d.find("input").prop("checked",!1),d.addClass("d-none"))}!a||"image"!==a&&"document"!==a&&"powerpoint"!==a&&"sound"!==a&&"archive"!==a&&"project"!==a||(l.find("input").prop("checked",!0),l.addClass("d-none")),i&&p.html(i),filePathPlaceHolderBySource&&u.attr("placeholder",filePathPlaceHolderBySource[t])}function i(e,t){var a=e.find(".js-secure-host-path-input"),n=e.find(".js-s3-file-path-input"),i=e.find(".js-file-type-volume"),r=e.find(".js-file-volume-field");e.find(".js-file-type-field").addClass("d-none"),"manual"===t?(i.removeClass("d-none"),r.removeClass("d-none"),a.removeClass("d-none"),n.addClass("d-none")):(i.addClass("d-none"),r.addClass("d-none"),a.addClass("d-none"),n.removeClass("d-none"))}function r(e){var a='<div id="extraDescriptionModal">';a+=t("#extraDescriptionForm").html();var n=t(a+="</div>");n.find(".js-form-groups").children().remove(),n.find(".js-form-groups").append('<div class="form-group">\n            <label class="input-label">image</label>\n            <div class="input-group">\n                <div class="input-group-prepend">\n                    <button type="button" class="input-group-text admin-file-manager" data-input="image_'+e+'" data-preview="holder">\n                        <i class="fa fa-upload"></i>\n                    </button>\n                </div>\n                <input type="text" name="value" id="image_'+e+'" class="form-control"/>\n            </div>\n        </div>');var i='<div id="extraDescriptionModal">';return i+=n.html(),i+="</div>"}function o(e,n){var i=e.attr("data-item-id"),o=e.attr("data-webinar-id"),s=a(),l={item_id:o,locale:n};t.post(adminPanelPrefix+"/webinar-extra-description/"+i+"/edit",l,(function(e){if(e&&e.webinarExtraDescription){var a=e.webinarExtraDescription,n='<div id="extraDescriptionModal">';n+=t("#extraDescriptionForm").html(),n+="</div>","company_logos"===a.type&&(n=r(s)),n=n.replaceAll(adminPanelPrefix+"/webinar-extra-description/store",adminPanelPrefix+"/webinar-extra-description/"+i+"/update"),Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var e=t("#extraDescriptionModal");Object.keys(a).forEach((function(t){e.find('[name="'+t+'"]').val(a[t])}));var n=e.find('select[name="locale"]');n&&(n.addClass("js-edit-extraDescription-locale-ajax"),n.attr("data-item-id",i),n.attr("data-webinar-id",o))}})}}))}function s(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.attr("data-ticket-id"),i=e.attr("data-webinar-id"),r={item_id:i,locale:a};t.post(adminPanelPrefix+"/tickets/"+n+"/edit",r,(function(e){if(e&&e.ticket){var a=e.ticket,r='<div id="addTicketModal">';r+=t("#webinarTicketModal").html(),r=(r+="</div>").replaceAll(adminPanelPrefix+"/tickets/store",adminPanelPrefix+"/tickets/"+n+"/update"),Swal.fire({html:r,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){t(".date-range-picker").daterangepicker({locale:{format:"YYYY-MM-DD"},drops:"down",opens:"right",startDate:moment(1e3*a.start_date).toDate(),endDate:moment(1e3*a.end_date).toDate()}),delete a.start_date,delete a.end_date,Object.keys(a).forEach((function(e){t("#addTicketModal").find('[name="'+e+'"]').val(a[e])}));var e=t("#addTicketModal").find('select[name="locale"]');e&&(e.addClass("js-edit-ticket-locale-ajax"),e.attr("data-ticket-id",n),e.attr("data-webinar-id",i))}})}}))}function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e.attr("data-chapter-id"),r=e.attr("data-webinar-id"),o={item_id:r,locale:n};t.post(adminPanelPrefix+"/chapters/"+i+"/edit",o,(function(e){if(e&&e.chapter){var n=e.chapter,o='<div id="editChapterModal">';o+=t("#webinarChapterModal").html(),o=(o+="</div>").replaceAll(adminPanelPrefix+"/chapters/store",adminPanelPrefix+"/chapters/"+i+"/update");var s=a();o=o.replaceAll("record",s),Swal.fire({html:o,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var e=t("#editChapterModal");Object.keys(n).forEach((function(t){if("status"===t){var a="active"===n.status;e.find('[name="'+t+'"]').prop("checked",a)}else if("check_all_contents_pass"===t){var i=n.check_all_contents_pass&&"0"!==n.check_all_contents_pass;e.find('[name="'+t+'"]').prop("checked",i)}else e.find('[name="'+t+'"]').val(n[t])}));var a=e.find('select[name="locale"]');a&&(a.addClass("js-edit-chapter-locale-ajax"),a.attr("data-chapter-id",i),a.attr("data-webinar-id",r))}})}}))}function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e.attr("data-session-id"),r=e.attr("data-webinar-id"),o={item_id:r,locale:n};t.post(adminPanelPrefix+"/sessions/"+i+"/edit",o,(function(e){if(e&&e.session){var n=e.session,o='<div id="addSessionModal">';o+=t("#webinarSessionModal").html(),o=(o+="</div>").replaceAll(adminPanelPrefix+"/sessions/store",adminPanelPrefix+"/sessions/"+i+"/update");var s=a();o=o.replaceAll("record",s),Swal.fire({html:o,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var e=t("#addSessionModal"),a=t(".datetimepicker");a.val(n.date),a.daterangepicker({locale:{format:"YYYY-MM-DD HH:mm"},singleDatePicker:!0,timePicker:!0,timePicker24Hour:!0}),delete n.date,Object.keys(n).forEach((function(t){if("session_api"===t)e.find('.js-api-input[value="'+n[t]+'"]').prop("checked",!0),e.find(".js-api-input").prop("disabled",!0),"local"!==n[t]&&(e.find(".js-ajax-api_secret").prop("disabled",!0),e.find(".js-ajax-date").prop("disabled",!0),e.find(".js-ajax-duration").prop("disabled",!0),e.find(".js-ajax-link").prop("disabled",!0)),"big_blue_button"===n[t]?(e.find(".js-moderator-secret").removeClass("d-none"),e.find(".js-ajax-moderator_secret").prop("disabled",!0)):"zoom"===n[t]?(e.find(".js-local-link").addClass("d-none"),e.find(".js-api-secret").addClass("d-none"),e.find(".js-moderator-secret").addClass("d-none")):"agora"===n[t]&&(e.find(".js-agora-chat-and-rec").removeClass("d-none"),e.find(".js-api-secret").addClass("d-none"),e.find(".js-local-link").addClass("d-none"),e.find(".js-moderator-secret").addClass("d-none"));else if("status"===t){var a="active"===n.status;e.find('[name="'+t+'"]').prop("checked",a)}else if("check_previous_parts"===t||"access_after_day"===t){(n.check_previous_parts||null!==n.access_after_day)&&(e.find(".js-sequence-content-switch").prop("checked",!0),e.find('[name="check_previous_parts"]').prop("checked",n.check_previous_parts),e.find('[name="access_after_day"]').val(n.access_after_day),e.find(".js-sequence-content-inputs").removeClass("d-none"))}else if("agora_settings"===t){var i=JSON.parse(n.agora_settings);i&&i.chat&&(!0===i.chat||"true"===i.chat)&&e.find('[name="agora_chat"]').prop("checked",!0),i&&i.record&&(!0===i.record||"true"===i.record)&&e.find('[name="agora_record"]').prop("checked",!0)}else e.find('[name="'+t+'"]').val(n[t])}));var o=e.find('select[name="locale"]');o&&(o.addClass("js-edit-session-locale-ajax"),o.attr("data-session-id",i),o.attr("data-webinar-id",r))}})}}))}function c(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.attr("data-faq-id"),i=e.attr("data-webinar-id"),r={item_id:i,locale:a};t.post(adminPanelPrefix+"/faqs/"+n+"/edit",r,(function(e){if(e&&e.faq){var a=e.faq,r='<div id="addFAQsModal">';r+=t("#webinarFaqModal").html(),r=(r+="</div>").replaceAll(adminPanelPrefix+"/faqs/store",adminPanelPrefix+"/faqs/"+n+"/update"),Swal.fire({html:r,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var e=t("#addFAQsModal");Object.keys(a).forEach((function(t){e.find('[name="'+t+'"]').val(a[t])}));var r=e.find('select[name="locale"]');r&&(r.addClass("js-edit-faq-locale-ajax"),r.attr("data-faq-id",n),r.attr("data-webinar-id",i))}})}}))}t.fn.serializeObject=function(){var e={},a=this.serializeArray();return t.each(a,(function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""})),e},t("body").on("click",".close-swl",(function(e){e.preventDefault(),Swal.close()})),jQuery().summernote&&makeSummernote(t("#summernote"),400),t("body").on("click","#saveAndPublish",(function(e){e.preventDefault(),t("#forDraft").val("publish"),t("#webinarForm").trigger("submit")})),t("body").on("click","#saveAsDraft",(function(e){e.preventDefault(),t("#forDraft").val(1),t("#webinarForm").trigger("submit")})),t("body").on("click","#saveReject",(function(e){e.preventDefault(),t("#forDraft").val("reject"),t("#webinarForm").trigger("submit")})),t("#partnerInstructorSwitch").on("change.bootstrapSwitch",(function(e){e.target.checked?(t("#partnerInstructorInput").removeClass("d-none"),handleSearchableSelect2("js-search-partner-user",adminPanelPrefix+"/users/search","name")):t("#partnerInstructorInput").addClass("d-none")})),t("body").on("change","#categories",(function(e){e.preventDefault();var a=this.value;t.get(adminPanelPrefix+"/filters/get-by-category-id/"+a,(function(e){if(e&&void 0!==e.filters&&e.filters.length){var a="";Object.keys(e.filters).forEach((function(t){var n=e.filters[t],i=[];n.options.length&&(i=n.options),a+='<div class="col-12 col-md-3">\n<div class="webinar-category-filters">\n<strong class="category-filter-title d-block">'+n.title+'</strong>\n<div class="py-10"></div>\n\n',i.length&&Object.keys(i).forEach((function(e){var t=i[e];a+='<div class="form-group mt-20 d-flex align-items-center justify-content-between">\n<label class="" for="filterOption'+t.id+'">'+t.title+'</label>\n<div class="custom-control custom-checkbox">\n<input type="checkbox" name="filters[]" value="'+t.id+'" class="custom-control-input" id="filterOption'+t.id+'">\n<label class="custom-control-label" for="filterOption'+t.id+'"></label>\n</div>\n</div>\n'})),a+="</div></div>"})),t("#categoriesFiltersContainer").removeClass("d-none"),t("#categoriesFiltersCard").html(a)}else t("#categoriesFiltersContainer").addClass("d-none"),t("#categoriesFiltersCard").html("")}))})),t("body").on("click","#webinarAddTicket",(function(e){e.preventDefault();var a='<div id="addTicketModal">';a+=t("#webinarTicketModal").html(),a+="</div>",Swal.fire({html:a,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"}),resetDatePickers()})),t("body").on("click","#saveTicket",(function(e){e.preventDefault();var a=t(this),n=t("#addTicketModal .js-form");handleWebinarItemForm(n,a)})),t(document).ready((function(){var a=getComputedStyle(document.body).getPropertyValue("--primary");function r(e){e.length&&e.sortable({group:"no-drop",handle:".move-icon",axis:"y",update:function(n,i){var r=e.sortable("toArray",{attribute:"data-id"});!function(e,n){t.post(adminPanelPrefix+"/webinars/order-items",{table:e,items:n},(function(e){e&&e.title&&e.msg&&t.toast({heading:e.title,text:e.msg,bgColor:a,textColor:"white",hideAfter:1e4,position:"bottom-right",icon:"success"})}))}(n.target.getAttribute("data-order-table"),r.join(","))}})}var o=[],s=t(".draggable-content-lists");if(s.length){var l,d=e(s);try{for(d.s();!(l=d.n()).done;){var c=l.value;o.push(t(c).attr("data-drag-class"))}}catch(e){d.e(e)}finally{d.f()}}if(o.length){var f,p=e(o);try{for(p.s();!(f=p.n()).done;){var u=f.value,m=t("."+u);m.length&&r(m)}}catch(e){p.e(e)}finally{p.f()}}var h=t(".file-form");h&&h.length&&h.each((function(e){if(h[e]){var a=t(h[e]),r=a.find(".js-file-storage").val(),o=a.find(".js-ajax-file_type").val();n(a,r,o);var s=a.find(".js-secure-host-upload-type-field input:checked").val();s&&"secure_host"===r&&i(a,s)}})),t(".accordion-content-wrapper .attachments-select2").length&&t(".accordion-content-wrapper .attachments-select2").select2({multiple:!0,width:"100%"});var v=t(".accordion-content-wrapper .js-content-summernote");v.length&&makeSummernote(v,400,(function(e,a){t(".js-hidden-content-summernote").val(e)}))})),t("body").on("change",".js-webinar-content-locale",(function(e){e.preventDefault();var a=t(this),n=t(this).closest(".js-content-form"),i=a.val(),r=a.attr("data-webinar-id"),o=a.attr("data-id"),s=a.attr("data-relation"),l=a.attr("data-fields");l=l.split(","),a.addClass("loadingbar gray");var d=adminPanelPrefix+"/webinars/"+r+"/getContentItemByLocale",c={item_id:o,locale:i,relation:s};t.post(d,c,(function(e){if(e&&e.item){var i=e.item;Object.keys(i).forEach((function(e){var a=i[e];-1!==t.inArray(e,l)&&n.find(".js-ajax-"+e).val(a);if("textLessons"===s&&"content"===e){var r=n.find(".js-content-"+o);r.length&&(r.summernote("destroy"),r.val(a),t(".js-hidden-content-"+o).val(a),makeSummernote(r,400,(function(e,a){t(".js-hidden-content-"+o).val(e)})))}})),a.removeClass("loadingbar gray")}})).fail((function(e){a.removeClass("loadingbar gray")}))})),window.handleWebinarItemForm=function(e,a){var n=serializeObjectByTag(e),i=e.attr("data-action");a.addClass("loadingbar primary").prop("disabled",!0),e.find("input").removeClass("is-invalid"),e.find("textarea").removeClass("is-invalid"),t.post(i,n,(function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout((function(){window.location.reload()}),500))})).fail((function(t){a.removeClass("loadingbar primary").prop("disabled",!1);var n=t.responseJSON;n&&"zoom_token_invalid"===n.status&&Swal.fire({icon:"error",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+n.zoom_error_msg+"</h3>",showConfirmButton:!1,width:"25rem"}),n&&n.errors&&Object.keys(n.errors).forEach((function(t){var a=n.errors[t],i=e.find(".js-ajax-"+t);"zoom-not-complete-alert"===t?e.find(".js-zoom-not-complete-alert").removeClass("d-none"):(i.addClass("is-invalid"),i.parent().find(".invalid-feedback").text(a[0]))}))}))},t("body").on("click",".save-chapter",(function(e){e.preventDefault();var a=t(this),n=a.closest(".chapter-form");handleWebinarItemForm(n,a)})),t("body").on("click",".js-add-chapter",(function(e){var n=t(this),i=n.attr("data-webinar-id"),r=n.attr("data-type"),o=n.attr("data-chapter"),s=n.attr("data-locale"),l=o||a(),d=t("#chapterModalHtml").clone();d.removeClass("d-none");var c=d.prop("innerHTML");c=c.replaceAll("record",l),d.html('<div id="chapterModal'+l+'">'+c+"</div>"),Swal.fire({html:d,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"36rem",onOpen:function(){var e=t("#chapterModal"+l);if(e.find("input.js-chapter-webinar-id").val(i),e.find("input.js-chapter-type").val(r),o){e.find(".section-title").text(editChapterLang);var a=adminPanelPrefix+"/chapters/"+o+"/update";e.find(".chapter-form").attr("data-action",a),t.get(adminPanelPrefix+"/chapters/"+o+"?locale="+s,(function(t){if(t&&t.chapter){e.find(".js-ajax-title").val(t.chapter.title);var a=e.find(".js-chapter-status-switch");"active"===t.chapter.status?a.prop("checked",!0):a.prop("checked",!1);var n=t.chapter.check_all_contents_pass&&"0"!==t.chapter.check_all_contents_pass;e.find(".js-chapter-check-all-contents-pass").prop("checked",n);var i=e.find(".js-chapter-locale");i.val(s),i.addClass("js-webinar-content-locale"),i.attr("data-id",o)}}))}}})})),t("body").on("click",".js-add-course-content-btn, .add-new-interactive-file-btn",(function(e){e.preventDefault();var n=t(this),i=n.attr("data-type"),r=n.attr("data-chapter"),o="#chapterContentAccordion"+r,s=a(),l="";switch(i){case"file":var d=t("#newFileForm");d.find(".chapter-input").val(r),l=(l=d.html()).replace(/record/g,s),t(o).prepend(l);break;case"new_interactive_file":var c=t("#newInteractiveFileForm");c.find(".chapter-input").val(r),l=(l=c.html()).replace(/record/g,s),t(o).prepend(l);break;case"session":var f=t("#newSessionForm");f.find(".chapter-input").val(r),l=(l=f.html()).replace(/record/g,s),t(o).prepend(l);break;case"text_lesson":var p=t("#newTextLessonForm");p.find(".chapter-input").val(r),l=(l=(l=(l=(l=p.html()).replace(/record/g,s)).replaceAll("attachments-select2","attachments-select2-"+s)).replaceAll("js-content-summernote","js-content-summernote-"+s)).replaceAll("js-hidden-content-summernote","js-hidden-content-summernote-"+s),t(o).prepend(l),t(".attachments-select2-"+s).select2({multiple:!0,width:"100%"}),jQuery().summernote&&makeSummernote(t(".js-content-summernote-"+s),400,(function(e,a){t(".js-hidden-content-summernote-"+s).val(e)}));break;case"assignment":var u=t("#newAssignmentForm");u.find(".chapter-input").val(r),l=(l=u.html()).replace(/record/g,s),t(o).prepend(l);break;case"quiz":var m=t("#newQuizForm");m.find(".chapter-input").val(r),l=(l=m.html()).replace(/record/g,s),t(o).prepend(l)}resetDatePickers(),feather.replace()})),t("body").on("click",".js-change-content-chapter",(function(e){e.preventDefault();var n=t(this),i=n.attr("data-item-id"),r=n.attr("data-item-type"),o=n.attr("data-chapter-id"),s=a(),l=t("#changeChapterModalHtml").clone();l.removeClass("d-none");var d=l.prop("innerHTML");l.html('<div id="changeChapterModalHtml'+s+'">'+d+"</div>"),Swal.fire({html:l,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"36rem",onOpen:function(){var e=t("#changeChapterModalHtml"+s);e.find("input.js-item-id").val(i),e.find("input.js-item-type").val(r),e.find(".js-ajax-chapter_id").val(o).change()}})})),t("body").on("click",".save-change-chapter",(function(e){e.preventDefault();var a=t(this),n=a.closest(".change-chapter-form");handleWebinarItemForm(n,a)})),t("body").on("change",".js-secure-host-upload-type-field input",(function(e){e.preventDefault();var a=t(this).val();i(t(this).closest(".file-form"),a)})),t("body").on("click",".js-save-file",(function(e){e.preventDefault();var a=t(this);!function(e,a){serializeObjectByTag(e);var n=e.attr("data-action");a.addClass("loadingbar primary").prop("disabled",!0),e.find("input").removeClass("is-invalid"),e.find("textarea").removeClass("is-invalid");var i=new FormData,r=e.find(".js-s3-file-input"),o=!1;r&&r.prop("files")&&r.prop("files")[0]&&(i.append("s3_file",r.prop("files")[0]),o=!0);var s=e.find("input, textarea, select").serializeArray();t.each(s,(function(){i.append(this.name,this.value)}));var l=e.find(".js-file-storage").val();e.find(".progress").addClass("d-none"),t.ajax({url:n,type:"POST",data:i,processData:!1,contentType:!1,cache:!1,xhr:function(){var t=new window.XMLHttpRequest,a=0;return t.upload.addEventListener("progress",(function(t){if(t.lengthComputable&&("s3"===l||"secure_host"===l)&&o){a=t.loaded/t.total*100;var n=Math.round(a)-1;e.find(".progress").removeClass("d-none");var i=e.find(".progress .progress-bar");i.css("width",n+"%"),i.text(n+"%")}}),!1),t},success:function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout((function(){window.location.reload()}),500))},error:function(t){a.removeClass("loadingbar primary").prop("disabled",!1);var n=t.responseJSON;n&&n.errors&&Object.keys(n.errors).forEach((function(t){var a=n.errors[t],i=e.find(".js-ajax-"+t);i.addClass("is-invalid"),i.parent().find(".invalid-feedback").text(a[0])}))}})}(a.closest(".file-form"),a)})),t("body").on("change",".js-file-storage",(function(e){e.preventDefault();var a=this.value,i=t(this).closest("form"),r=i.find(".js-ajax-file_type").val();n(i,a,r)})),t("body").on("change",".js-ajax-file_type",(function(e){e.preventDefault();var a=t(this).val(),i=t(this).closest("form"),r=i.find(".js-file-storage").val();n(i,r,a)})),t("body").on("change",".js-api-input",(function(e){e.preventDefault();var a=t(this).closest(".session-form"),n=this.value;a.find(".js-zoom-not-complete-alert").addClass("d-none"),a.find(".js-agora-chat-and-rec").addClass("d-none"),"big_blue_button"===n?(a.find(".js-local-link").addClass("d-none"),a.find(".js-api-secret").removeClass("d-none"),a.find(".js-moderator-secret").removeClass("d-none")):"zoom"===n?(a.find(".js-local-link").addClass("d-none"),a.find(".js-api-secret").addClass("d-none"),a.find(".js-moderator-secret").addClass("d-none"),hasZoomApiToken&&"true"!==hasZoomApiToken&&a.find(".js-zoom-not-complete-alert").removeClass("d-none")):"agora"===n?(a.find(".js-agora-chat-and-rec").removeClass("d-none"),a.find(".js-api-secret").addClass("d-none"),a.find(".js-local-link").addClass("d-none"),a.find(".js-moderator-secret").addClass("d-none")):"jitsi"===n?(a.find(".js-local-link").addClass("d-none"),a.find(".js-api-secret").addClass("d-none"),a.find(".js-moderator-secret").addClass("d-none")):(a.find(".js-local-link").removeClass("d-none"),a.find(".js-api-secret").removeClass("d-none"),a.find(".js-moderator-secret").addClass("d-none"))})),t("body").on("click",".js-save-session",(function(e){e.preventDefault();var a=t(this),n=a.closest(".session-form");handleWebinarItemForm(n,a)})),t("body").on("click",".js-session-has-ended",(function(){t.toast({heading:requestFailedLang,text:thisLiveHasEndedLang,bgColor:"#f63c3c",textColor:"white",hideAfter:1e4,position:"bottom-right",icon:"error"})})),t("body").on("click",".js-save-text_lesson",(function(e){e.preventDefault();var a=t(this),n=a.closest(".text_lesson-form");handleWebinarItemForm(n,a)})),t("body").on("click",".js-save-assignment",(function(e){e.preventDefault();var a=t(this),n=a.closest(".assignment-form");handleWebinarItemForm(n,a)})),t("body").on("click",".assignment-attachments-add-btn",(function(e){var n=t(this).closest(".js-assignment-attachments-items"),i=n.find(".assignment-attachments-main-row").clone();i.removeClass("assignment-attachments-main-row"),i.removeClass("d-none");var r=i.find(".assignment-attachments-remove-btn");r&&r.removeClass("d-none");var o=i.prop("innerHTML");o=(o=(o=o.replaceAll("assignmentTemp",a())).replaceAll("btn-primary","btn-danger")).replaceAll("assignment-attachments-add-btn","assignment-attachments-remove-btn"),i.html(o),n.append(i)})),t("body").on("click",".assignment-attachments-remove-btn",(function(e){e.preventDefault(),t(this).closest(".js-ajax-attachments").remove()})),t("body").on("click",".cancel-accordion",(function(e){e.preventDefault(),t(this).closest(".accordion-row").remove()})),t("body").on("click","#webinarAddPrerequisites",(function(e){var a=this;e.preventDefault();var n='<div id="addPrerequisitesModal">';n+=t("#webinarPrerequisitesModal").html(),n=(n=(n+="</div>").replaceAll("prerequisites-select","prerequisites-select2")).replaceAll("str_",""),Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){t(".prerequisites-select2").select2({placeholder:t(a).data("placeholder"),minimumInputLength:3,allowClear:!0,ajax:{url:adminPanelPrefix+"/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(e){return{term:e.term,webinar_id:t(this).data("webinar-id")}},processResults:function(e){return{results:t.map(e,(function(e){return{text:e.title,id:e.id}}))}}}})}})})),t("body").on("click","#savePrerequisites",(function(e){e.preventDefault();var a=t(this),n=t("#addPrerequisitesModal .js-prerequisites-form");handleWebinarItemForm(n,a)})),t("body").on("click","#webinarAddFAQ",(function(e){e.preventDefault();var a='<div id="addFAQsModal">';a+=t("#webinarFaqModal").html(),a+="</div>",Swal.fire({html:a,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})})),t("body").on("click","#saveFAQ",(function(e){e.preventDefault();var a=t(this),n=t("#addFAQsModal .js-faq-form");handleWebinarItemForm(n,a)})),t("body").on("click","#add_new_learning_materials",(function(e){e.preventDefault();a();var n='<div id="extraDescriptionModal">';n+=t("#extraDescriptionForm").html(),n+="</div>",Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){t('#extraDescriptionModal input[name="type"]').val("learning_materials")}})})),t("body").on("click","#add_new_company_logos",(function(e){e.preventDefault();var n=r(a());Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){t('#extraDescriptionModal input[name="type"]').val("company_logos")}})})),t("body").on("click","#add_new_requirements",(function(e){e.preventDefault();a();var n='<div id="extraDescriptionModal">';n+=t("#extraDescriptionForm").html(),n+="</div>",Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){t('#extraDescriptionModal input[name="type"]').val("requirements")}})})),t("body").on("click","#saveExtraDescription",(function(e){e.preventDefault();var a=t(this),n=t("#extraDescriptionModal .js-form");handleWebinarItemForm(n,a)})),t("body").on("click",".edit-extraDescription",(function(e){e.preventDefault(),o(t(this))})),t("body").on("change",".js-edit-extraDescription-locale-ajax",(function(e){e.preventDefault();var a=t(this),n=a.val();o(a,n)})),t("body").on("click","#webinarAddQuiz",(function(e){var a=this;e.preventDefault();var n='<div id="addQuizModal">';n+=t("#quizzesModal").html(),n=(n+="</div>").replaceAll("quiz-select2","quiz-select22"),Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"30rem",onOpen:function(){t(".quiz-select22").select2({placeholder:t(a).data("placeholder"),allowClear:!0,width:"100%"})}})})),t("body").on("click","#saveQuiz",(function(e){e.preventDefault();var a=t(this),n=t("#addQuizModal .js-form");handleWebinarItemForm(n,a)})),t("body").on("click",".edit-ticket",(function(e){e.preventDefault();var a=t(this);loadingSwl(),s(a)})),t("body").on("change",".js-edit-ticket-locale-ajax",(function(e){e.preventDefault();var a=t(this),n=a.val();s(a,n)})),t("body").on("click",".edit-chapter",(function(e){e.preventDefault();var a=t(this);loadingSwl(),l(a)})),t("body").on("change",".js-edit-chapter-locale-ajax",(function(e){e.preventDefault();var a=t(this),n=a.val();l(a,n)})),t("body").on("click",".edit-session",(function(e){e.preventDefault();var a=t(this);loadingSwl(),d(a)})),t("body").on("change",".js-edit-session-locale-ajax",(function(e){e.preventDefault();var a=t(this),n=a.val();d(a,n)})),t("body").on("change",".js-video-demo-source",(function(e){e.preventDefault();var a=t(this).val(),n=t(".js-video-demo-path-input .js-video-demo-path-upload"),i=t(".js-video-demo-path-input .js-video-demo-path-links"),r=t(".js-video-demo-path-input input");n.addClass("d-none"),i.addClass("d-none"),"upload"===a?n.removeClass("d-none"):i.removeClass("d-none"),videoDemoPathPlaceHolderBySource&&r.attr("placeholder",videoDemoPathPlaceHolderBySource[a])})),t("body").on("click",".edit-prerequisite",(function(e){e.preventDefault();var a=t(this),n=a.attr("data-prerequisite-id"),i=a.attr("data-webinar-id");loadingSwl();var r={item_id:i};t.post(adminPanelPrefix+"/prerequisites/"+n+"/edit",r,(function(e){var a=this;if(e&&e.prerequisite){var i=e.prerequisite,r='<div id="addPrerequisitesModal">';r+=t("#webinarPrerequisitesModal").html(),r=(r=(r=(r+="</div>").replaceAll("prerequisites-select","prerequisites-select2")).replaceAll(adminPanelPrefix+"/prerequisites/store",adminPanelPrefix+"/prerequisites/"+n+"/update")).replaceAll("str_",""),Swal.fire({html:r,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){t(".prerequisites-select2").append('<option selected="selected" value="'+i.webinar_id+'">'+i.webinar_title+"</option>"),1===i.required&&t("#addPrerequisitesModal").find('[name="required"]').prop("checked",!0),t(".prerequisites-select2").select2({placeholder:t(a).data("placeholder"),minimumInputLength:3,allowClear:!0,ajax:{url:adminPanelPrefix+"/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(e){return{term:e.term,webinar_id:t(this).data("webinar-id")}},processResults:function(e){return{results:t.map(e,(function(e){return{text:e.title,id:e.id}}))}}}})}})}}))})),t("body").on("click",".edit-faq",(function(e){e.preventDefault();var a=t(this);loadingSwl(),c(a)})),t("body").on("change",".js-edit-faq-locale-ajax",(function(e){e.preventDefault();var a=t(this),n=a.val();c(a,n)})),t("body").on("click",".js-get-faq-description",(function(e){e.preventDefault();var a='<div class="my-2">'+t(this).parent().find("input").val()+"</div>";Swal.fire({html:a,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"30rem"})})),t("body").on("click",".edit-webinar-quiz",(function(e){e.preventDefault();var a=t(this),n=a.attr("data-webinar-quiz-id"),i=a.attr("data-webinar-id");loadingSwl();var r={item_id:i};t.post(adminPanelPrefix+"/webinar-quiz/"+n+"/edit",r,(function(e){var a=this;if(e&&e.webinarQuiz){var i=e.webinarQuiz,r='<div id="addQuizModal">';r+=t("#quizzesModal").html(),r=(r=(r+="</div>").replaceAll(adminPanelPrefix+"/webinar-quiz/store",adminPanelPrefix+"/webinar-quiz/"+n+"/update")).replaceAll("quiz-select2","quiz-select22"),Swal.fire({html:r,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"30rem",onOpen:function(){t(".quiz-select22").append('<option selected="selected" value="'+i.id+'">'+i.title+"</option>"),t(".quiz-select22").select2({placeholder:t(a).data("placeholder"),allowClear:!0,width:"100%"}),t("#addQuizModal").find('[name="chapter_id"]').val(i.chapter_id)}})}}))})),t("body").on("change",'select[name="type"]',(function(){var e=!0;"webinar"!==this.value&&(e=!1);for(var a=0,n=["capacity","start_date"];a<n.length;a++){var i=n[a];e?t(".js-"+i).removeClass("d-none"):t(".js-"+i).addClass("d-none")}})),t("body").on("change",".js-sequence-content-switch",(function(){var e=t(this).closest(".js-content-form").find(".js-sequence-content-inputs");e.addClass("d-none"),this.checked&&e.removeClass("d-none")})),t("body").on("click","#bundleAddNewCourses",(function(e){e.preventDefault();var a='<div id="addBundleWebinarModal">';a+=t("#bundleWebinarsModal").html(),a=(a=(a+="</div>").replaceAll("bundleWebinars-select","bundleWebinars-select2")).replaceAll("str_",""),Swal.fire({html:a,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){t(".bundleWebinars-select2").select2({allowClear:!1})}})})),t("body").on("click","#saveBundleWebinar",(function(e){e.preventDefault();var a=t(this),n=t("#addBundleWebinarModal .js-form");handleWebinarItemForm(n,a)})),t("body").on("click",".edit-bundle-webinar",(function(e){e.preventDefault();var a=t(this),n=a.attr("data-item-id"),i=a.attr("data-bundle-id");loadingSwl();var r={item_id:i};t.post(adminPanelPrefix+"/bundle-webinars/"+n+"/edit",r,(function(e){if(e&&e.bundleWebinar){var a=e.bundleWebinar,i='<div id="addBundleWebinarModal">';i+=t("#bundleWebinarsModal").html(),i=(i=(i=(i+="</div>").replaceAll("bundleWebinars-select","bundleWebinars-select2")).replaceAll(adminPanelPrefix+"/bundle-webinars/store",adminPanelPrefix+"/bundle-webinars/"+n+"/update")).replaceAll("str_",""),Swal.fire({html:i,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var e=t(".bundleWebinars-select2");e.val(a.webinar_id),e.select2({allowClear:!1})}})}}))})),t("body").on("change",".js-interactive-type",(function(){var e=t(this).closest(".file-form").find(".js-interactive-file-name-input");e.addClass("d-none"),"custom"===t(this).val()&&e.removeClass("d-none")})),feather.replace()}(jQuery)})();